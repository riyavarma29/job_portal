{% extends 'app/base.html' %}
{% block content %}
<div class="container mt-5">
  <h2>Register</h2>
  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="mb-3">
      {{ form.username.label_tag }} {{ form.username }}
    </div>
    <div class="mb-3">
      {{ form.email.label_tag }} {{ form.email }}
    </div>
    <div class="mb-3">
      {{ form.password.label_tag }} {{ form.password }}
    </div>
    <div class="mb-3">
      {{ form.role.label_tag }} {{ form.role }}
    </div>

    <div id="developer-fields" style="display: none;">
      <div class="mb-3">
        {{ form.skills.label_tag }} {{ form.skills }}
      </div>
      <div class="mb-3">
        {{ form.experience.label_tag }} {{ form.experience }}
      </div>
      <div class="mb-3">
        {{ form.github.label_tag }} {{ form.github }}
      </div>
      <div class="mb-3">
        {{ form.resume.label_tag }} {{ form.resume }}
      </div>
    </div>

    <button type="submit" class="btn btn-primary">Register</button>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const roleSelect = document.querySelector('select[name="role"]');
  const devFields = document.getElementById('developer-fields');

  function toggleDevFields() {
    devFields.style.display = roleSelect.value === 'developer' ? 'block' : 'none';
  }

  if (roleSelect) {
    roleSelect.addEventListener('change', toggleDevFields);
    toggleDevFields();
  }
});
</script>
{% endblock %}
